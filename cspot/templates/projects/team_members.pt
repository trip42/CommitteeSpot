<metal:main use-macro="load:../master.pt">
<metal:title fill-slot="title">${project.item_name} Template</metal:title>
<metal:content fill-slot="content">

<metal:header use-macro="load:header.pt" />

<div class="row">
    <div class="span12">
         <h2>Team Members</h2>
    </div>
</div> 

<div class="row">
    <div class="span12">
        <div class="padding">

            <metal:alerts use-macro="load:../alerts.pt" />

            <table class="table table-striped">
            <thead>
            <tr>
                <th>E-mail</th>
                <th>Name</th>
                <th>Role</th>
                <th>Last Login</th>
                <th></th>
            </tr>
            </thead>

            <tbody>
            <tr tal:repeat="user users">
                <td tal:content="user.email"></td>
                <td tal:content="user.name"></td>
                <td tal:content="user.role"></td>
                <td tal:content="user.last_login | string:n/a"></td>
                <td style="text-align: right;">
                    <a tal:attributes="href route_url('project:team:remove', request, project_id=project.id, user_id=user.id)"
                       tal:condition="user.role != 'owner'"><i class="icon-remove"></i> Remove</a>
                </td>
            </tr>
            </tbody>

            </table>

            <h3>Add a team member</h3>

            <tal:temp tal:condition="project.is_owner_temporary()">
                <p>
                    Before you can add members to your team, you need to save this project to a CommitteeSpot account.
                </p>

                <p>
                    <a href="${route_url('auth:signup',request)}" class="btn btn-primary">Setup an account to continue</a>
                    it takes less than a minute.
                </p>
            </tal:temp>

            <form method="post"
                  tal:condition="not:project.is_owner_temporary()"
                  tal:attributes="action route_url('project:team:add', request, project_id=project.id)">
            <fieldset>
                <div class="control-group">
                    <label class="control-label" for="email">E-mail Address:</label>
                    <div class="controls">
                        <input type="text" name="email" id="email" class="span5"
                               tal:attributes="value request.params.get('email','')" />
                    </div>
                </div>
                <div class="control-group">
                    <div class="controls">
                        <button type="submit" class="btn btn-primary">Add team member</button>
                    </div>
                </div>
                <div class="control-group">
                    <div class="controls">

                        <hr>
                        <a tal:attributes="href route_url('project:distribute', request, project_id=project.id)"
                           class="btn btn-primary btn-large btn-success"><i class="icon-ok icon-white"></i> Done adding team members</a>

                    </div>
                </div>
            </fieldset>
            <script>$(function() { $('#email').focus() })</script>
            </form>
                
        </div>
    </div>
</div>

</metal:content>
</metal:main>

